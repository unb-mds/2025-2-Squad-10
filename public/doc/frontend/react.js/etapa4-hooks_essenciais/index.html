<!DOCTYPE html>
<html lang="pt-br">
<head><script src="/2025-2-OncoMap/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=2025-2-OncoMap/livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>
        
            Etapa4 Hooks Essenciais | OncoMap
        
    </title>
    

    
    
    
    
    
    
    
    
    
    
    

    
        
        
    
    
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="http://localhost:1313/2025-2-OncoMap/css/doc-page-bundle.min.css">



</head>
<body>

    <nav class="navbar">

    <a class="navbar-brand" href="http://localhost:1313/2025-2-OncoMap/">
        OncoMap
    </a>

    <ul class="navbar-links">
        <li><a href="http://localhost:1313/2025-2-OncoMap/">Início</a></li>
        <li><a href="http://localhost:1313/2025-2-OncoMap/sprints/">Sprints</a></li>
        <li><a href="http://localhost:1313/2025-2-OncoMap/requisitos/">Requisitos</a></li>
        <li><a href="http://localhost:1313/2025-2-OncoMap/arquitetura/">Arquitetura</a></li>
        <li><a href="http://localhost:1313/2025-2-OncoMap/diversos/">Diversos</a></li>
        <li><a href="http://localhost:1313/2025-2-OncoMap/doc/">Documentação</a></li>
    </ul>

    <div class="navbar-right">
        <a href="https://github.com/unb-mds/2025-2-OncoMap" target="_blank">GitHub</a>
    </div>

</nav>

    <section class="hero">
    <div class="container">
        <h1>Etapa4 Hooks Essenciais</h1>
        
        
        
        </div>
</section>

    <main>
        

    <div class="container page-single">
        
        
        
        
        <div class="content">
            <h1 id="etapa-4--hooks-essenciais-useeffect-e-custom-hooks">Etapa 4 — Hooks essenciais (useEffect e Custom Hooks)</h1>
<p>Nesta etapa você vai aprender dois tópicos fundamentais do React moderno:</p>
<ol>
<li><strong>useEffect</strong> — como lidar com efeitos colaterais (buscar dados, timers, eventos do DOM, etc).</li>
<li><strong>Custom Hooks</strong> — como criar hooks reutilizáveis para encapsular lógica.</li>
</ol>
<hr>
<h2 id="1-o-que-são-hooks">1) O que são Hooks?</h2>
<p>Hooks são funções que permitem “ligar” recursos do React (state, ciclo de vida, contexto) em componentes funcionais. Exemplos nativos: <code>useState</code>, <code>useEffect</code>, <code>useRef</code>, <code>useContext</code>, <code>useMemo</code>, <code>useCallback</code>.<br>
<strong>Regras importantes (&ldquo;Rules of Hooks&rdquo;)</strong>:</p>
<ul>
<li>Chame hooks apenas no <strong>topo</strong> de componentes React ou custom hooks (não dentro de loops, condições ou funções aninhadas).</li>
<li>Nome dos custom hooks deve começar com <code>use</code> (ex.: <code>useFetch</code>).</li>
</ul>
<hr>
<h2 id="2-useeffect--o-básico">2) <code>useEffect</code> — o básico</h2>
<p><code>useEffect</code> é o hook para <strong>efeitos colaterais</strong>: operações que acontecem fora da renderização pura (fetch, timers, subscrições, manipulação do DOM, sincronização com APIs externas).</p>
<p>Sintaxe básica:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// efeito aqui (executa após a renderização)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">return</span> () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// cleanup (opcional) executado quando o componente desmonta ou antes do próximo efeito
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  };
</span></span><span style="display:flex;"><span>}, [<span style="color:#a6e22e">dep1</span>, <span style="color:#a6e22e">dep2</span>]); <span style="color:#75715e">// array de dependências
</span></span></span></code></pre></div><h3 id="exemplos-simples">Exemplos simples</h3>
<ul>
<li><strong>Executar uma vez quando o componente monta</strong>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Componente montou&#34;</span>);
</span></span><span style="display:flex;"><span>}, []); <span style="color:#75715e">// array vazio = monta apenas uma vez
</span></span></span></code></pre></div><ul>
<li><strong>Executar em toda renderização (cuidado!)</strong>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Executa em todo render&#34;</span>);
</span></span><span style="display:flex;"><span>}); <span style="color:#75715e">// sem array =&gt; roda após cada render
</span></span></span></code></pre></div><ul>
<li><strong>Executar quando uma dependência muda</strong>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  document.<span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`Você clicou </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">count</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> vezes`</span>;
</span></span><span style="display:flex;"><span>}, [<span style="color:#a6e22e">count</span>]); <span style="color:#75715e">// roda quando &#39;count&#39; muda
</span></span></span></code></pre></div><h3 id="o-array-de-dependências-por-que-é-importante">O array de dependências (por que é importante)</h3>
<ul>
<li>Liste <strong>todas</strong> as variáveis externas usadas dentro do efeito que podem mudar (estado, props, funções).</li>
<li>Se você omitir dependências, pode ter <strong>stale closures</strong> (efeito usando valores antigos) ou comportamento imprevisível.</li>
<li>O ESLint (plugin react-hooks) ajuda a detectar dependências faltantes automaticamente.</li>
</ul>
<h3 id="função-de-limpeza-cleanup">Função de limpeza (cleanup)</h3>
<ul>
<li>Retorne uma função dentro do efeito para <strong>limpar</strong> timers, listeners ou cancelar subscrições.</li>
<li>Exemplo com <code>setInterval</code>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTime</span>(<span style="color:#a6e22e">t</span> =&gt; <span style="color:#a6e22e">t</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>  }, <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> () =&gt; <span style="color:#a6e22e">clearInterval</span>(<span style="color:#a6e22e">id</span>); <span style="color:#75715e">// limpa quando desmonta
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}, []);
</span></span></code></pre></div><h3 id="exemplos-práticos-com-cleanup">Exemplos práticos com cleanup</h3>
<ul>
<li><strong>Event listener (resize)</strong>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleResize</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setWidth</span>(window.<span style="color:#a6e22e">innerWidth</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;resize&#34;</span>, <span style="color:#a6e22e">handleResize</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> () =&gt; window.<span style="color:#a6e22e">removeEventListener</span>(<span style="color:#e6db74">&#34;resize&#34;</span>, <span style="color:#a6e22e">handleResize</span>);
</span></span><span style="display:flex;"><span>}, []);
</span></span></code></pre></div><ul>
<li><strong>Abort controller para fetch</strong> (evitar setState após desmontar):</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">controller</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AbortController</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">load</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>, { <span style="color:#a6e22e">signal</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">controller</span>.<span style="color:#a6e22e">signal</span> });
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">json</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">setData</span>(<span style="color:#a6e22e">json</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#34;AbortError&#34;</span>) <span style="color:#a6e22e">setError</span>(<span style="color:#a6e22e">err</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">load</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> () =&gt; <span style="color:#a6e22e">controller</span>.<span style="color:#a6e22e">abort</span>();
</span></span><span style="display:flex;"><span>}, [<span style="color:#a6e22e">url</span>]);
</span></span></code></pre></div><h3 id="erros-comuns-com-useeffect">Erros comuns com useEffect</h3>
<ul>
<li><strong>Loop infinito</strong>: atualizar state dentro do efeito sem controlar dependências.
<ul>
<li>Ex.: <code>useEffect(() =&gt; setX(y + 1), [y])</code> pode criar loop se não for planejado.</li>
</ul>
</li>
<li><strong>Esquecer o cleanup</strong>: causar memory leaks (timers, listeners).</li>
<li><strong>Não incluir dependências</strong>: efeito usa valores antigos (stale values).</li>
<li><strong>Passar funções não memoizadas como dependência</strong>: a função pode mudar em cada render e disparar o efeito desnecessariamente; use <code>useCallback</code> quando necessário.</li>
</ul>
<hr>
<h2 id="3-uselayouteffect-breve-menção">3) <code>useLayoutEffect</code> (breve menção)</h2>
<ul>
<li>Parecido com <code>useEffect</code> mas roda <strong>síncrono</strong> antes do paint do navegador — útil para ler/ajustar layout do DOM antes de pintar.</li>
<li>Na maioria dos casos, use <code>useEffect</code>; escolha <code>useLayoutEffect</code> apenas quando precisar ajustar o DOM imediatamente (ex.: medições de tamanho que afetam o layout).</li>
</ul>
<hr>
<h2 id="4-custom-hooks--por-que-e-como-criar">4) Custom Hooks — por que e como criar</h2>
<p><strong>O que são?</strong> Funções que começam com <code>use</code> e podem chamar outros hooks. Encapsulam lógica reutilizável (fetch, sincronização com localStorage, manipulação de formularios, etc).</p>
<h3 id="boas-práticas">Boas práticas</h3>
<ul>
<li>Nome curto e claro: <code>useFetch</code>, <code>useLocalStorage</code>, <code>useToggle</code>.</li>
<li>Mantenha o hook focado em uma responsabilidade.</li>
<li>Hooks podem retornar estado, setters, funções utilitárias ou um objeto com esses valores.</li>
<li>Coloque-os em <code>src/hooks/</code> para organização.</li>
</ul>
<h3 id="exemplo-1--uselocalstorage">Exemplo 1 — <code>useLocalStorage</code></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useState</span>, <span style="color:#a6e22e">useEffect</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">useLocalStorage</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">initialValue</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">setState</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">saved</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">getItem</span>(<span style="color:#a6e22e">key</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">saved</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">saved</span>) <span style="color:#f92672">:</span> <span style="color:#a6e22e">initialValue</span>;
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">setItem</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">state</span>));
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">state</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [<span style="color:#a6e22e">state</span>, <span style="color:#a6e22e">setState</span>];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Uso:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">nome</span>, <span style="color:#a6e22e">setNome</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useLocalStorage</span>(<span style="color:#e6db74">&#34;nome&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>);
</span></span></code></pre></div><h3 id="exemplo-2--usefetch-com-loading-e-cancelamento">Exemplo 2 — <code>useFetch</code> (com loading e cancelamento)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useState</span>, <span style="color:#a6e22e">useEffect</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">useFetch</span>(<span style="color:#a6e22e">url</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">setData</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">loading</span>, <span style="color:#a6e22e">setLoading</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">error</span>, <span style="color:#a6e22e">setError</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">controller</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AbortController</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setLoading</span>(<span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getData</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>, { <span style="color:#a6e22e">signal</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">controller</span>.<span style="color:#a6e22e">signal</span> });
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">ok</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#34;Erro HTTP &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">json</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setData</span>(<span style="color:#a6e22e">json</span>);
</span></span><span style="display:flex;"><span>      } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#34;AbortError&#34;</span>) <span style="color:#a6e22e">setError</span>(<span style="color:#a6e22e">err</span>);
</span></span><span style="display:flex;"><span>      } <span style="color:#66d9ef">finally</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setLoading</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getData</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> () =&gt; <span style="color:#a6e22e">controller</span>.<span style="color:#a6e22e">abort</span>();
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">url</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">loading</span>, <span style="color:#a6e22e">error</span> };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Uso:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">loading</span>, <span style="color:#a6e22e">error</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useFetch</span>(<span style="color:#e6db74">&#34;https://api.exemplo.com/itens&#34;</span>);
</span></span></code></pre></div><h3 id="exemplo-3--usetoggle-simples">Exemplo 3 — <code>useToggle</code> (simples)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useState</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">useToggle</span>(<span style="color:#a6e22e">initial</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">on</span>, <span style="color:#a6e22e">setOn</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#a6e22e">initial</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toggle</span> <span style="color:#f92672">=</span> () =&gt; <span style="color:#a6e22e">setOn</span>(<span style="color:#a6e22e">v</span> =&gt; <span style="color:#f92672">!</span><span style="color:#a6e22e">v</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [<span style="color:#a6e22e">on</span>, <span style="color:#a6e22e">toggle</span>];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Uso:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">menuOpen</span>, <span style="color:#a6e22e">toggleMenu</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useToggle</span>(<span style="color:#66d9ef">false</span>);
</span></span></code></pre></div><h3 id="exemplo-4--useinterval-uso-avançado-de-refs-para-evitar-stale-callbacks">Exemplo 4 — <code>useInterval</code> (uso avançado de refs para evitar stale callbacks)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useEffect</span>, <span style="color:#a6e22e">useRef</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">useInterval</span>(<span style="color:#a6e22e">callback</span>, <span style="color:#a6e22e">delay</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">savedCallback</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">useRef</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// atualiza a referência para o callback mais recente
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">savedCallback</span>.<span style="color:#a6e22e">current</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">callback</span>;
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">callback</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">delay</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">tick</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">savedCallback</span>.<span style="color:#a6e22e">current</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(<span style="color:#a6e22e">tick</span>, <span style="color:#a6e22e">delay</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> () =&gt; <span style="color:#a6e22e">clearInterval</span>(<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">delay</span>]);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Uso:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#a6e22e">useInterval</span>(() =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;tick&#34;</span>);
</span></span><span style="display:flex;"><span>}, <span style="color:#ae81ff">1000</span>);
</span></span></code></pre></div><hr>
<h2 id="5-integração-quando-transformar-lógica-em-hook">5) Integração: quando transformar lógica em hook?</h2>
<ul>
<li>Você tem a mesma lógica repetida em vários componentes.</li>
<li>Quer separar a lógica (busca, sincronização, validação) da UI.</li>
<li>Precisa de uma API limpa para controlar comportamento (ex.: <code>useModal</code> que retorna <code>[open, openModal, closeModal]</code>).</li>
</ul>
<hr>
<h2 id="6-dicas-e-armadilhas-comuns-com-hooks">6) Dicas e armadilhas comuns com hooks</h2>
<ul>
<li><strong>Memoize funções</strong>: quando passar funções para dependências ou para componentes filhos, use <code>useCallback</code> para evitar renders/efeitos desnecessários.</li>
<li><strong>useRef para valores mutáveis</strong> que não precisam causar re-render (ex.: id de timer, contador interno).</li>
<li><strong>Evite lógica complexa dentro de effects</strong> — extraia em funções ou em hooks para testabilidade.</li>
<li><strong>Teste hooks</strong> com utilitários (React Testing Library + hooks testing utilities).</li>
<li><strong>Evite efeitos sincronizados pesados</strong> no <code>useLayoutEffect</code> — prefira otimizações de performance e throttle/debounce quando necessário.</li>
</ul>
<hr>
<h2 id="7-exercícios-práticos-sugeridos">7) Exercícios práticos sugeridos</h2>
<ol>
<li>Implemente <code>useLocalStorage</code> e use-o para salvar o tema do site (claro/escuro).</li>
<li>Crie <code>useFetch</code> e mostre uma lista de dados carregados de uma API pública.</li>
<li>Faça <code>useInterval</code> e use para atualizar um relógio na tela.</li>
<li>Converta a lógica de toggle de um modal em <code>useModal</code> (retorne <code>open, openModal, closeModal</code>).</li>
<li>Encontre e corrija um bug: um effect que faz <code>setState</code> sem dependências e causa loop infinito — explique a causa e solução.</li>
</ol>
<hr>
<h3 id="conclusão">Conclusão</h3>
<p><code>useEffect</code> é a ferramenta padrão para efeitos colaterais e exige atenção às dependências e ao cleanup. Custom hooks permitem organizar e reutilizar lógica de forma elegante — escreva hooks pequenos e bem-focados. Com domínio desses conceitos você avança para arquiteturas melhores (Context, state managers) e componentes mais testáveis e reutilizáveis.</p>

        </div>
    </div>


    </main>

    <footer class="footer">
    <div class="container">
        <div class="footer-grid">
            
            <div class="footer-column about">
                <h3>OncoMap</h3>
                <p>Mapa de investimento em saúde oncológica</p>
            </div>
            
            <div class="footer-column links">
                <h3>Links Úteis</h3>
                <ul>
                    <li><a href="http://localhost:1313/2025-2-OncoMap/">Início</a></li>
                    <li><a href="http://localhost:1313/2025-2-OncoMap/sprints">Sprints</a></li>
                    
                    
                    
                    
                        <li><a href="http://localhost:1313/2025-2-OncoMap/requisitos/">Requisitos</a></li>
                    
                    
                    
                    
                        <li><a href="http://localhost:1313/2025-2-OncoMap/arquitetura/">Arquitetura</a></li>
                    
                </ul>
            </div>
            
            <div class="footer-column contact">
                <h3>Contato</h3>
                <ul>
                    <li><a href="https://github.com/unb-mds/2025-2-OncoMap" target="_blank">GitHub</a></li>
                </ul>
            </div>

        </div>
    </div>
    
    <div class="footer-bottom">
        <div class="container">
            <p>&copy; 2025 OncoMap. Todos os direitos reservados.</p>
            <p>Desenvolvido pela equipe UnB-MDS</p>
        </div>
    </div>
</footer>
    
    <script src="http://localhost:1313/2025-2-OncoMap/js/app.js"></script>
</body>
</html>